<!--
Automatically generated HTML file from DocOnce source
(https://github.com/hplgit/doconce/)
-->
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="DocOnce: https://github.com/hplgit/doconce/" />
<meta name="description" content="Doing operating system tasks in Python">
<meta name="keywords" content="make a folder (in Python),directory,environment variables,move to a folder (in Python),rename file/folder (in Python),list files (in Python),check file/folder existence (in Python),remove files (in Python),delete files (in Python),remove folders (in Python),delete folders (in Python),copy files (in Python),copy folders (in Python),run programs (from Python),execute programs (from Python),split filename">

<title>Doing operating system tasks in Python</title>

<!-- Bootstrap style: bootswatch_readable -->
<link href="http://netdna.bootstrapcdn.com/bootswatch/3.1.1/readable/bootstrap.min.css" rel="stylesheet">
<!-- not necessary
<link href="http://netdna.bootstrapcdn.com/font-awesome/4.0.3/css/font-awesome.css" rel="stylesheet">
-->


</head>

<!-- tocinfo
{'highest level': 2,
 'sections': [(' Make a folder ', 2, None, '___sec0'),
              (' Make intermediate folders ', 2, None, '___sec1'),
              (' Move to a folder ', 2, None, '___sec2'),
              (' Rename a file or folder ', 2, None, '___sec3'),
              (' List files ', 2, None, '___sec4'),
              (' List all files and folders in a folder ',
               2,
               None,
               '___sec5'),
              (' Check if a file or folder exists ', 2, None, '___sec6'),
              (' Remove files ', 2, None, '___sec7'),
              (' Remove a folder and all its subfolders ',
               2,
               None,
               '___sec8'),
              (' Copy a file to another file or folder ', 2, None, '___sec9'),
              (' Copy a folder and all its subfolders ', 2, None, '___sec10'),
              (' Run any operating system command ', 2, None, '___sec11'),
              (' Split file or folder name ', 2, None, '___sec12'),
              (' Traverse a folder tree ', 2, None, '___sec13')]}
end of tocinfo -->

<body>

    
<!-- Bootstrap navigation bar -->
<div class="navbar navbar-default navbar-fixed-top">
  <div class="navbar-header">
    <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-responsive-collapse">
      <span class="icon-bar"></span>
      <span class="icon-bar"></span>
      <span class="icon-bar"></span>
    </button>
    <a class="navbar-brand" href="ostasks.html">Doing operating system tasks in Python</a>
  </div>
  <div class="navbar-collapse collapse navbar-responsive-collapse">
    <ul class="nav navbar-nav navbar-right">
      <li class="dropdown">
        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Contents <b class="caret"></b></a>
        <ul class="dropdown-menu">
     <!-- navigation toc: --> <li><a href="#___sec0" style="font-size: 80%;">Make a folder</a></li>
     <!-- navigation toc: --> <li><a href="#___sec1" style="font-size: 80%;">Make intermediate folders</a></li>
     <!-- navigation toc: --> <li><a href="#___sec2" style="font-size: 80%;">Move to a folder</a></li>
     <!-- navigation toc: --> <li><a href="#___sec3" style="font-size: 80%;">Rename a file or folder</a></li>
     <!-- navigation toc: --> <li><a href="#___sec4" style="font-size: 80%;">List files</a></li>
     <!-- navigation toc: --> <li><a href="#___sec5" style="font-size: 80%;">List all files and folders in a folder</a></li>
     <!-- navigation toc: --> <li><a href="#___sec6" style="font-size: 80%;">Check if a file or folder exists</a></li>
     <!-- navigation toc: --> <li><a href="#___sec7" style="font-size: 80%;">Remove files</a></li>
     <!-- navigation toc: --> <li><a href="#___sec8" style="font-size: 80%;">Remove a folder and all its subfolders</a></li>
     <!-- navigation toc: --> <li><a href="#___sec9" style="font-size: 80%;">Copy a file to another file or folder</a></li>
     <!-- navigation toc: --> <li><a href="#___sec10" style="font-size: 80%;">Copy a folder and all its subfolders</a></li>
     <!-- navigation toc: --> <li><a href="._ostasks003.html#___sec11" style="font-size: 80%;">Run any operating system command</a></li>
     <!-- navigation toc: --> <li><a href="._ostasks003.html#___sec12" style="font-size: 80%;">Split file or folder name</a></li>
     <!-- navigation toc: --> <li><a href="._ostasks004.html#___sec13" style="font-size: 80%;">Traverse a folder tree</a></li>

        </ul>
      </li>
    </ul>
  </div>
</div>
</div> <!-- end of navigation bar -->

<div class="container">

<p>&nbsp;</p><p>&nbsp;</p><p>&nbsp;</p> <!-- add vertical space -->

<a name="part0002"></a>
<!-- !split -->
<p style="font-size:80%">Much of the material in this document is taken from Appendix H.3 in the book <a href="http://www.springer.com/mathematics/computational+science+%26+engineering/book/978-3-642-54958-8"><em>A Primer on Scientific Programming with Python</em></a>, 4th edition, by the same author, published by Springer, 2014.</p>

<h2 id="___sec0">Make a folder </h2>

<p>
Python applies the term directory instead of folder.
The equivalent of the Unix <code>mkdir mydir</code> is

<p>

<!-- code=python (!bc pycod) typeset with pygments style "default" -->
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%"><span style="color: #008000; font-weight: bold">import</span> <span style="color: #0000FF; font-weight: bold">os</span>
os<span style="color: #666666">.</span>mkdir(<span style="color: #BA2121">&#39;mydir&#39;</span>)
</pre></div>
<p>
Ordinary
files are created by the <code>open</code> and <code>close</code> functions in Python.

<h2 id="___sec1">Make intermediate folders </h2>

<p>
Suppose you want to make a subfolder under your home folder:

<p>

<!-- code=text (!bc ccq) typeset with pygments style "default" -->
<blockquote>
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%">$HOME/python/project1/temp
</pre></div>
</blockquote><p>
but the intermediate folders <code>python</code> and <code>project1</code> do not exist.
This requires each new folder to be made separately by <code>os.mkdir</code>,
or you can make all folders at once with <code>os.makedirs</code>:

<p>

<!-- code=python (!bc pycod) typeset with pygments style "default" -->
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%">foldername <span style="color: #666666">=</span> os<span style="color: #666666">.</span>path<span style="color: #666666">.</span>join(os<span style="color: #666666">.</span>environ[<span style="color: #BA2121">&#39;HOME&#39;</span>], <span style="color: #BA2121">&#39;python&#39;</span>,
                          <span style="color: #BA2121">&#39;project1&#39;</span>, <span style="color: #BA2121">&#39;temp&#39;</span>)
os<span style="color: #666666">.</span>makedirs(foldername)
</pre></div>
<p>
With <code>os.environ[var]</code> we can get the value of
any environment variable <code>var</code> as
a string. The <code>os.path.join</code> function joins folder names and a filename
in a platform-independent way.

<h2 id="___sec2">Move to a folder </h2>

<p>
The <code>cd</code> command reads <code>os.chdir</code> and <code>cwd</code> is <code>os.getcwd</code>:

<p>

<!-- code=python (!bc pycod) typeset with pygments style "default" -->
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%">origfolder <span style="color: #666666">=</span> os<span style="color: #666666">.</span>getcwd()  <span style="color: #408080; font-style: italic"># get name of current folder</span>
os<span style="color: #666666">.</span>chdir(foldername)      <span style="color: #408080; font-style: italic"># move (&quot;change directory&quot;)</span>
<span style="color: #666666">...</span>
os<span style="color: #666666">.</span>chdir(origfolder)      <span style="color: #408080; font-style: italic"># move back</span>
</pre></div>

<h2 id="___sec3">Rename a file or folder </h2>

<p>
The cross-platform <code>mv</code> command is

<p>

<!-- code=python (!bc pycod) typeset with pygments style "default" -->
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%">os<span style="color: #666666">.</span>rename(oldname, newname)
</pre></div>

<h2 id="___sec4">List files </h2>

<p>
Unix wildcard notation can be used to list files. The equivalent of
<code>ls *.py</code> and <code>ls plot*[1-4]*.dat</code> reads

<p>

<!-- code=python (!bc pycod) typeset with pygments style "default" -->
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%"><span style="color: #008000; font-weight: bold">import</span> <span style="color: #0000FF; font-weight: bold">glob</span>
filelist1 <span style="color: #666666">=</span> glob<span style="color: #666666">.</span>glob(<span style="color: #BA2121">&#39;*.py&#39;</span>)
filelist2 <span style="color: #666666">=</span> glob<span style="color: #666666">.</span>glob(<span style="color: #BA2121">&#39;plot*[1-4]*.dat&#39;</span>)
</pre></div>

<h2 id="___sec5">List all files and folders in a folder </h2>

<p>
The counterparts to <code>ls -a mydir</code> and just <code>ls -a</code> are

<p>

<!-- code=python (!bc pycod) typeset with pygments style "default" -->
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%">filelist1 <span style="color: #666666">=</span> os<span style="color: #666666">.</span>listdir(<span style="color: #BA2121">&#39;mydir&#39;</span>)
filelist1 <span style="color: #666666">=</span> os<span style="color: #666666">.</span>listdir(os<span style="color: #666666">.</span>curdir)  <span style="color: #408080; font-style: italic"># current folder (directory)</span>
filelist1<span style="color: #666666">.</span>sort()                   <span style="color: #408080; font-style: italic"># sort alphabetically</span>
</pre></div>

<h2 id="___sec6">Check if a file or folder exists </h2>

<p>
The widely used constructions in Unix scripts for
testing if a file or folder
exist are <code>if [ -f $filename ]; then</code> and
<code>if [ -d $dirname ]; then</code>. These
have very readable counterparts in Python:

<p>

<!-- code=python (!bc pycod) typeset with pygments style "default" -->
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%"><span style="color: #008000; font-weight: bold">if</span> os<span style="color: #666666">.</span>path<span style="color: #666666">.</span>isfile(filename):
    inputfile <span style="color: #666666">=</span> <span style="color: #008000">open</span>(filename, <span style="color: #BA2121">&#39;r&#39;</span>)
    <span style="color: #666666">...</span>

<span style="color: #008000; font-weight: bold">if</span> os<span style="color: #666666">.</span>path<span style="color: #666666">.</span>isdir(dirnamename):
    filelist <span style="color: #666666">=</span> os<span style="color: #666666">.</span>listdir(dirname)
    <span style="color: #666666">...</span>
</pre></div>
<p>
<div id="app:ostasks:os:remove:glob"></div>

<h2 id="___sec7">Remove files </h2>

<p>
Removing a single file is done with <code>os.rename</code>, and a loop is
required for doing <code>rm tmp_*.df</code>:

<p>

<!-- code=python (!bc pycod) typeset with pygments style "default" -->
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%"><span style="color: #008000; font-weight: bold">import</span> <span style="color: #0000FF; font-weight: bold">glob</span>
filelist <span style="color: #666666">=</span> glob<span style="color: #666666">.</span>glob(<span style="color: #BA2121">&#39;tmp_*.pdf&#39;</span>)
<span style="color: #008000; font-weight: bold">for</span> filename <span style="color: #AA22FF; font-weight: bold">in</span> filelist:
    os<span style="color: #666666">.</span>remove(filename)
</pre></div>

<h2 id="___sec8">Remove a folder and all its subfolders </h2>

<p>
The <code>rm -rf mytree</code> command removes an entire folder tree.
In Python, the cross-platform valid command becomes

<p>

<!-- code=python (!bc pycod) typeset with pygments style "default" -->
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%"><span style="color: #008000; font-weight: bold">import</span> <span style="color: #0000FF; font-weight: bold">shutil</span>
shutil<span style="color: #666666">.</span>rmtree(foldername)
</pre></div>
<p>
It goes without saying that this command must be used with great care!

<h2 id="___sec9">Copy a file to another file or folder </h2>

<p>
The <code>cp fromfile tofile</code> construction applies <code>shutil.copy</code> in Python:

<p>

<!-- code=python (!bc pycod) typeset with pygments style "default" -->
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%">shutil<span style="color: #666666">.</span>copy(<span style="color: #BA2121">&#39;fromfile&#39;</span>, <span style="color: #BA2121">&#39;tofile&#39;</span>)
</pre></div>

<h2 id="___sec10">Copy a folder and all its subfolders </h2>

<p>
The recursive copy command <code>cp -r</code> for folder trees
is in Python expressed by <code>shell.copytree</code>:

<p>

<!-- code=python (!bc pycod) typeset with pygments style "default" -->
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%">shutil<span style="color: #666666">.</span>copytree(sourcefolder, destination)
</pre></div>
<p>
<p>
<!-- navigation buttons at the bottom of the page -->
<ul class="pager">
  <li class="previous">
    <a href="._ostasks001.html">&larr; Prev</a>
  </li>
  <li class="next">
    <a href="._ostasks003.html">Next &rarr;</a>
  </li>
</ul>
<!-- ------------------- end of main content --------------- -->

</div>  <!-- end container -->
<!-- include javascript, jQuery *first* -->
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>
<script src="http://netdna.bootstrapcdn.com/bootstrap/3.0.0/js/bootstrap.min.js"></script>

<!-- Bootstrap footer
<footer>
<a href="http://..."><img width="250" align=right src="http://..."></a>
</footer>
-->


</body>
</html>
    

